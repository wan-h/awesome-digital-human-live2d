# æµ‹è¯•å·¥å…·è¯´æ˜

æœ¬ç›®å½•åŒ…å«äº†æ•°å­—äººé¡¹ç›®çš„å„ç§æµ‹è¯•å·¥å…·å’Œæµ‹è¯•è„šæœ¬ã€‚

## æµ‹è¯•æ–‡ä»¶è¯´æ˜

### APIæµ‹è¯•
- `test_agent_api.py` - Agent APIæ¥å£æµ‹è¯•
- `test_asr_api.py` - ASR APIæ¥å£æµ‹è¯•
- `test_llm_api.py` - LLM APIæ¥å£æµ‹è¯•
- `test_tts_api.py` - TTS APIæ¥å£æµ‹è¯•
- `test_common_api.py` - é€šç”¨APIæ¥å£æµ‹è¯•

### WebSocketæµ‹è¯•
- `test_asr_websocket_client.py` - **ASR WebSocketå®¢æˆ·ç«¯æµ‹è¯•å·¥å…·**
- `test_ws_web.html` - WebSocket Webæµ‹è¯•é¡µé¢

### ä¸“é¡¹æµ‹è¯•
- `server/test_streaming_asr_api.py` - æµå¼ASR APIä¸“é¡¹æµ‹è¯•
- `engine/asr/` - ASRå¼•æ“ç›¸å…³æµ‹è¯•
- `src/audio/` - éŸ³é¢‘å¤„ç†æµ‹è¯•èµ„æº

## ASR WebSocketå®¢æˆ·ç«¯æµ‹è¯•å·¥å…·

`test_asr_websocket_client.py` æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ASR WebSocketæµ‹è¯•å®¢æˆ·ç«¯ï¼Œæ”¯æŒï¼š

- ğŸ¤ å®æ—¶éº¦å…‹é£éŸ³é¢‘æµæµ‹è¯•
- ğŸ“ éŸ³é¢‘æ–‡ä»¶æµæµ‹è¯•
- ğŸ”— å®Œæ•´çš„WebSocketåè®®å®ç°
- ğŸ“Š å®æ—¶æ˜¾ç¤ºè¯†åˆ«ç»“æœ
- ğŸ“ è¯¦ç»†çš„æ—¥å¿—è¾“å‡º

### å¿«é€Ÿä½¿ç”¨

```bash
# è¿›å…¥testç›®å½•
cd test

# éº¦å…‹é£æµ‹è¯•ï¼ˆé»˜è®¤10ç§’ï¼‰
python test_asr_websocket_client.py --mode mic

# éŸ³é¢‘æ–‡ä»¶æµ‹è¯•
python test_asr_websocket_client.py --mode file --file /path/to/audio.wav

# è¯¦ç»†æ—¥å¿—æ¨¡å¼
python test_asr_websocket_client.py --mode mic --verbose
```

### è¯¦ç»†æ–‡æ¡£

å®Œæ•´çš„ä½¿ç”¨è¯´æ˜å’Œé…ç½®æŒ‡å—è¯·å‚è€ƒï¼š[ASRå®¢æˆ·ç«¯æµ‹è¯•å·¥å…·æ–‡æ¡£](../docs/asr_client_testing.md)

## è¿è¡Œæµ‹è¯•

### ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install -r ../test_requirements.txt

# ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
# å‚è€ƒéƒ¨ç½²æ–‡æ¡£å¯åŠ¨æ•°å­—äººæœåŠ¡
```

### è¿è¡Œå•ä¸ªæµ‹è¯•

```bash
# è¿è¡ŒASR APIæµ‹è¯•
python test_asr_api.py

# è¿è¡ŒWebSocketå®¢æˆ·ç«¯æµ‹è¯•
python test_asr_websocket_client.py --mode mic --duration 5
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
# ä½¿ç”¨pytestè¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
pytest test_asr_api.py -v

# è¿è¡Œæµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š
pytest --html=report.html --self-contained-html
```

## æµ‹è¯•é…ç½®

### pytesté…ç½®

æµ‹è¯•é…ç½®åœ¨ `pytest.ini` æ–‡ä»¶ä¸­å®šä¹‰ï¼ŒåŒ…æ‹¬ï¼š
- æµ‹è¯•å‘ç°è§„åˆ™
- æ—¥å¿—é…ç½®
- æ ‡è®°å®šä¹‰

### æµ‹è¯•ç¯å¢ƒ

åœ¨ `conftest.py` ä¸­å®šä¹‰äº†æµ‹è¯•çš„å…¬å…±é…ç½®å’Œfixtureï¼š
- æµ‹è¯•æœåŠ¡å™¨é…ç½®
- å…¬å…±æµ‹è¯•æ•°æ®
- æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–

## æ³¨æ„äº‹é¡¹

1. **æœåŠ¡å™¨ä¾èµ–**: å¤§éƒ¨åˆ†æµ‹è¯•éœ€è¦æ•°å­—äººæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
2. **éŸ³é¢‘è®¾å¤‡**: ASRç›¸å…³æµ‹è¯•éœ€è¦å¯ç”¨çš„éŸ³é¢‘è¾“å…¥è®¾å¤‡
3. **ç½‘ç»œè¿æ¥**: WebSocketæµ‹è¯•éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
4. **æƒé™è¦æ±‚**: éº¦å…‹é£æµ‹è¯•å¯èƒ½éœ€è¦ç³»ç»ŸéŸ³é¢‘æƒé™

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**: æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ï¼Œç«¯å£æ˜¯å¦æ­£ç¡®
2. **éŸ³é¢‘è®¾å¤‡é”™è¯¯**: æ£€æŸ¥éº¦å…‹é£æƒé™å’Œè®¾å¤‡å¯ç”¨æ€§
3. **ä¾èµ–ç¼ºå¤±**: ç¡®ä¿å®‰è£…äº†æ‰€æœ‰æµ‹è¯•ä¾èµ–
4. **æƒé™é—®é¢˜**: ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç³»ç»Ÿæƒé™è®¿é—®éŸ³é¢‘è®¾å¤‡

### è°ƒè¯•æŠ€å·§

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
python test_asr_websocket_client.py --mode mic --verbose

# æ£€æŸ¥æœåŠ¡å™¨è¿é€šæ€§
telnet localhost 8000

# æŸ¥çœ‹pytestè¯¦ç»†è¾“å‡º
pytest -v -s
```

## è´¡çŒ®æŒ‡å—

å¦‚æœä½ æƒ³æ·»åŠ æ–°çš„æµ‹è¯•æˆ–æ”¹è¿›ç°æœ‰æµ‹è¯•ï¼š

1. éµå¾ªç°æœ‰çš„æµ‹è¯•å‘½åè§„èŒƒ
2. æ·»åŠ é€‚å½“çš„æ–‡æ¡£å’Œæ³¨é‡Š
3. ç¡®ä¿æµ‹è¯•çš„ç‹¬ç«‹æ€§å’Œå¯é‡å¤æ€§
4. æ›´æ–°ç›¸å…³çš„READMEæ–‡æ¡£

## ç›¸å…³æ–‡æ¡£

- [éƒ¨ç½²è¯´æ˜](../docs/deploy_instrction.md)
- [å¼€å‘è¯´æ˜](../docs/developer_instrction.md)
- [ASRå®¢æˆ·ç«¯æµ‹è¯•å·¥å…·](../docs/asr_client_testing.md)
- [æµå¼ASRä½¿ç”¨æŒ‡å—](../docs/streaming_asr_usage.md)